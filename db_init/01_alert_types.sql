-- Idempotent creation and seeding of alert_types
CREATE TABLE IF NOT EXISTS alert_types (
  type_name text PRIMARY KEY,
  emoji text,
  payload jsonb,
  created_at timestamptz DEFAULT now()
);

-- Insert known event types from NWS (idempotent)
-- Emojis chosen heuristically based on keywords.

INSERT INTO alert_types (type_name, emoji, payload) VALUES
('911 Telephone Outage', 'ğŸ“', jsonb_build_object('name','911 Telephone Outage')),
('Administrative Message', 'ğŸ“¢', jsonb_build_object('name','Administrative Message')),
('Air Quality Alert', 'ğŸ˜·', jsonb_build_object('name','Air Quality Alert')),
('Air Stagnation Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Air Stagnation Advisory')),
('Ashfall Advisory', 'ğŸŒ‹', jsonb_build_object('name','Ashfall Advisory')),
('Ashfall Warning', 'ğŸŒ‹', jsonb_build_object('name','Ashfall Warning')),
('Avalanche Advisory', 'â„ï¸', jsonb_build_object('name','Avalanche Advisory')),
('Avalanche Warning', 'â„ï¸', jsonb_build_object('name','Avalanche Warning')),
('Avalanche Watch', 'â„ï¸', jsonb_build_object('name','Avalanche Watch')),
('Beach Hazards Statement', 'ğŸ–ï¸', jsonb_build_object('name','Beach Hazards Statement')),
('Blizzard Warning', 'ğŸŒ¨ï¸', jsonb_build_object('name','Blizzard Warning')),
('Blowing Dust Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Blowing Dust Advisory')),
('Blowing Dust Warning', 'ğŸŒ«ï¸', jsonb_build_object('name','Blowing Dust Warning')),
('Blue Alert', 'ğŸ”µ', jsonb_build_object('name','Blue Alert')),
('Brisk Wind Advisory', 'ğŸ’¨', jsonb_build_object('name','Brisk Wind Advisory')),
('Child Abduction Emergency', 'ğŸš¨', jsonb_build_object('name','Child Abduction Emergency')),
('Civil Danger Warning', 'ğŸš¨', jsonb_build_object('name','Civil Danger Warning')),
('Civil Emergency Message', 'ğŸš¨', jsonb_build_object('name','Civil Emergency Message')),
('Coastal Flood Advisory', 'ğŸ–ï¸', jsonb_build_object('name','Coastal Flood Advisory')),
('Coastal Flood Statement', 'ğŸ–ï¸', jsonb_build_object('name','Coastal Flood Statement')),
('Coastal Flood Warning', 'ğŸ–ï¸', jsonb_build_object('name','Coastal Flood Warning')),
('Coastal Flood Watch', 'ğŸ–ï¸', jsonb_build_object('name','Coastal Flood Watch')),
('Cold Weather Advisory', 'ğŸ§Š', jsonb_build_object('name','Cold Weather Advisory')),
('Dense Fog Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Dense Fog Advisory')),
('Dense Smoke Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Dense Smoke Advisory')),
('Dust Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Dust Advisory')),
('Dust Storm Warning', 'ğŸŒ«ï¸', jsonb_build_object('name','Dust Storm Warning')),
('Earthquake Warning', 'ğŸŒ', jsonb_build_object('name','Earthquake Warning')),
('Evacuation Immediate', 'ğŸš¨', jsonb_build_object('name','Evacuation Immediate')),
('Extreme Heat Warning', 'ğŸ”¥', jsonb_build_object('name','Extreme Heat Warning')),
('Extreme Heat Watch', 'ğŸ”¥', jsonb_build_object('name','Extreme Heat Watch')),
('Extreme Cold Warning', 'ğŸ§Š', jsonb_build_object('name','Extreme Cold Warning')),
('Extreme Cold Watch', 'ğŸ§Š', jsonb_build_object('name','Extreme Cold Watch')),
('Extreme Fire Danger', 'ğŸ”¥', jsonb_build_object('name','Extreme Fire Danger')),
('Extreme Wind Warning', 'ğŸ’¨', jsonb_build_object('name','Extreme Wind Warning')),
('Fire Warning', 'ğŸ”¥', jsonb_build_object('name','Fire Warning')),
('Fire Weather Watch', 'ğŸ”¥', jsonb_build_object('name','Fire Weather Watch')),
('Flash Flood Statement', 'ğŸŒŠ', jsonb_build_object('name','Flash Flood Statement')),
('Flash Flood Warning', 'ğŸŒŠ', jsonb_build_object('name','Flash Flood Warning')),
('Flash Flood Watch', 'ğŸŒŠ', jsonb_build_object('name','Flash Flood Watch')),
('Flood Advisory', 'ğŸŒ§ï¸', jsonb_build_object('name','Flood Advisory')),
('Flood Statement', 'ğŸŒ§ï¸', jsonb_build_object('name','Flood Statement')),
('Flood Warning', 'ğŸŒ§ï¸', jsonb_build_object('name','Flood Warning')),
('Flood Watch', 'ğŸŒ§ï¸', jsonb_build_object('name','Flood Watch')),
('Freeze Warning', 'ğŸ§Š', jsonb_build_object('name','Freeze Warning')),
('Freeze Watch', 'ğŸ§Š', jsonb_build_object('name','Freeze Watch')),
('Freezing Fog Advisory', 'ğŸŒ«ï¸', jsonb_build_object('name','Freezing Fog Advisory')),
('Freezing Spray Advisory', 'ğŸ§Š', jsonb_build_object('name','Freezing Spray Advisory')),
('Frost Advisory', 'ğŸ§Š', jsonb_build_object('name','Frost Advisory')),
('Gale Warning', 'â›µ', jsonb_build_object('name','Gale Warning')),
('Gale Watch', 'â›µ', jsonb_build_object('name','Gale Watch')),
('Hazardous Materials Warning', 'â˜£ï¸', jsonb_build_object('name','Hazardous Materials Warning')),
('Hazardous Seas Warning', 'ğŸš¢', jsonb_build_object('name','Hazardous Seas Warning')),
('Hazardous Seas Watch', 'ğŸš¢', jsonb_build_object('name','Hazardous Seas Watch')),
('Hazardous Weather Outlook', 'âš ï¸', jsonb_build_object('name','Hazardous Weather Outlook')),
('Heat Advisory', 'ğŸ”¥', jsonb_build_object('name','Heat Advisory')),
('High Surf Advisory', 'ğŸ„', jsonb_build_object('name','High Surf Advisory')),
('High Surf Warning', 'ğŸ„', jsonb_build_object('name','High Surf Warning')),
('High Wind Warning', 'ğŸ’¨', jsonb_build_object('name','High Wind Warning')),
('High Wind Watch', 'ğŸ’¨', jsonb_build_object('name','High Wind Watch')),
('Hurricane Force Wind Warning', 'ğŸŒ€', jsonb_build_object('name','Hurricane Force Wind Warning')),
('Hurricane Force Wind Watch', 'ğŸŒ€', jsonb_build_object('name','Hurricane Force Wind Watch')),
('Hurricane Warning', 'ğŸŒ€', jsonb_build_object('name','Hurricane Warning')),
('Hurricane Watch', 'ğŸŒ€', jsonb_build_object('name','Hurricane Watch')),
('Ice Storm Warning', 'ğŸ§Š', jsonb_build_object('name','Ice Storm Warning')),
('Lake Effect Snow Warning', 'â„ï¸', jsonb_build_object('name','Lake Effect Snow Warning')),
('Lake Wind Advisory', 'ğŸ’¨', jsonb_build_object('name','Lake Wind Advisory')),
('Lakeshore Flood Advisory', 'ğŸ–ï¸', jsonb_build_object('name','Lakeshore Flood Advisory')),
('Lakeshore Flood Statement', 'ğŸ–ï¸', jsonb_build_object('name','Lakeshore Flood Statement')),
('Lakeshore Flood Warning', 'ğŸ–ï¸', jsonb_build_object('name','Lakeshore Flood Warning')),
('Lakeshore Flood Watch', 'ğŸ–ï¸', jsonb_build_object('name','Lakeshore Flood Watch')),
('Law Enforcement Warning', 'ğŸš”', jsonb_build_object('name','Law Enforcement Warning')),
('Local Area Emergency', 'ğŸš¨', jsonb_build_object('name','Local Area Emergency')),
('Low Water Advisory', 'ğŸ’§', jsonb_build_object('name','Low Water Advisory')),
('Marine Weather Statement', 'ğŸš¢', jsonb_build_object('name','Marine Weather Statement')),
('Nuclear Power Plant Warning', 'â˜¢ï¸', jsonb_build_object('name','Nuclear Power Plant Warning')),
('Radiological Hazard Warning', 'â˜¢ï¸', jsonb_build_object('name','Radiological Hazard Warning')),
('Red Flag Warning', 'ğŸ”¥', jsonb_build_object('name','Red Flag Warning')),
('Rip Current Statement', 'ğŸ–ï¸', jsonb_build_object('name','Rip Current Statement')),
('Severe Thunderstorm Warning', 'â›ˆï¸', jsonb_build_object('name','Severe Thunderstorm Warning')),
('Severe Thunderstorm Watch', 'â›ˆï¸', jsonb_build_object('name','Severe Thunderstorm Watch')),
('Severe Weather Statement', 'âš ï¸', jsonb_build_object('name','Severe Weather Statement')),
('Shelter In Place Warning', 'ğŸ ', jsonb_build_object('name','Shelter In Place Warning')),
('Short Term Forecast', 'ğŸ“¡', jsonb_build_object('name','Short Term Forecast')),
('Small Craft Advisory', 'â›µ', jsonb_build_object('name','Small Craft Advisory')),
('Snow Squall Warning', 'â„ï¸', jsonb_build_object('name','Snow Squall Warning')),
('Special Marine Warning', 'ğŸš¢', jsonb_build_object('name','Special Marine Warning')),
('Special Weather Statement', 'âš ï¸', jsonb_build_object('name','Special Weather Statement')),
('Storm Surge Warning', 'ğŸŒŠ', jsonb_build_object('name','Storm Surge Warning')),
('Storm Surge Watch', 'ğŸŒŠ', jsonb_build_object('name','Storm Surge Watch')),
('Storm Warning', 'â›ˆï¸', jsonb_build_object('name','Storm Warning')),
('Storm Watch', 'â›ˆï¸', jsonb_build_object('name','Storm Watch')),
('Test', 'ğŸ”', jsonb_build_object('name','Test')),
('Tornado Warning', 'ğŸŒªï¸', jsonb_build_object('name','Tornado Warning')),
('Tornado Watch', 'ğŸŒªï¸', jsonb_build_object('name','Tornado Watch')),
('Tropical Cyclone Local Statement', 'ğŸŒ€', jsonb_build_object('name','Tropical Cyclone Local Statement')),
('Tropical Storm Warning', 'ğŸŒ€', jsonb_build_object('name','Tropical Storm Warning')),
('Tropical Storm Watch', 'ğŸŒ€', jsonb_build_object('name','Tropical Storm Watch')),
('Tsunami Advisory', 'ğŸŒŠ', jsonb_build_object('name','Tsunami Advisory')),
('Tsunami Warning', 'ğŸŒŠ', jsonb_build_object('name','Tsunami Warning')),
('Tsunami Watch', 'ğŸŒŠ', jsonb_build_object('name','Tsunami Watch')),
('Typhoon Warning', 'ğŸŒ€', jsonb_build_object('name','Typhoon Warning')),
('Typhoon Watch', 'ğŸŒ€', jsonb_build_object('name','Typhoon Watch')),
('Volcano Warning', 'ğŸŒ‹', jsonb_build_object('name','Volcano Warning')),
('Wind Advisory', 'ğŸ’¨', jsonb_build_object('name','Wind Advisory')),
('Winter Storm Warning', 'â„ï¸', jsonb_build_object('name','Winter Storm Warning')),
('Winter Storm Watch', 'â„ï¸', jsonb_build_object('name','Winter Storm Watch')),
('Winter Weather Advisory', 'â„ï¸', jsonb_build_object('name','Winter Weather Advisory'))
ON CONFLICT (type_name) DO UPDATE SET emoji = COALESCE(alert_types.emoji, EXCLUDED.emoji), payload = COALESCE(alert_types.payload, EXCLUDED.payload);

-- End of seed file
